{"version":3,"sources":["../src/interfaces/storage-adapter.ts","../src/interfaces/event-bus.ts","../src/interfaces/job-queue.ts","../src/interfaces/tool-registry.ts","../src/interfaces/provider-registry.ts","../src/config/wai-config.ts","../src/di/container.ts","../src/orchestration/request-builder.ts","../src/orchestration/standalone-api.ts","../src/orchestration/wiring-services-stub.ts","../src/orchestration/parallel-processing-wiring-service.ts","../src/orchestration/error-recovery-wiring-service.ts"],"names":["z","randomUUID","EventEmitter","activeProcess"],"mappings":"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","file":"index.cjs","sourcesContent":["/**\n * Storage Adapter Interface\n * Provides abstraction for different storage backends (PostgreSQL, Redis, In-Memory, etc.)\n * Framework-agnostic design allows integration with any database/ORM\n */\n\nexport interface IStorageAdapter {\n  /**\n   * Retrieve a value by key\n   * @param key - Unique identifier\n   * @returns The stored value or null if not found\n   */\n  get<T = unknown>(key: string): Promise<T | null>;\n\n  /**\n   * Store a value with a key\n   * @param key - Unique identifier\n   * @param value - Data to store\n   * @param options - Optional storage configuration\n   */\n  set<T = unknown>(\n    key: string,\n    value: T,\n    options?: StorageOptions\n  ): Promise<void>;\n\n  /**\n   * Delete a value by key\n   * @param key - Unique identifier\n   * @returns True if deleted, false if not found\n   */\n  delete(key: string): Promise<boolean>;\n\n  /**\n   * Query multiple values based on filter criteria\n   * @param filter - Query filter object\n   * @param options - Query options (limit, offset, sort)\n   * @returns Array of matching results\n   */\n  query<T = unknown>(\n    filter: Record<string, unknown>,\n    options?: QueryOptions\n  ): Promise<T[]>;\n\n  /**\n   * Check if a key exists\n   * @param key - Unique identifier\n   * @returns True if key exists\n   */\n  exists(key: string): Promise<boolean>;\n\n  /**\n   * Clear all data (use with caution!)\n   * @param confirm - Must pass true to confirm\n   */\n  clear(confirm: boolean): Promise<void>;\n\n  /**\n   * Get multiple values by keys\n   * @param keys - Array of keys\n   * @returns Array of values (null for missing keys)\n   */\n  mget<T = unknown>(keys: string[]): Promise<(T | null)[]>;\n\n  /**\n   * Set multiple key-value pairs\n   * @param entries - Array of [key, value] tuples\n   */\n  mset<T = unknown>(entries: [string, T][]): Promise<void>;\n\n  /**\n   * Increment a numeric value\n   * @param key - Key for numeric value\n   * @param amount - Amount to increment (default: 1)\n   * @returns New value after increment\n   */\n  increment(key: string, amount?: number): Promise<number>;\n\n  /**\n   * Set expiration on a key (TTL)\n   * @param key - Key to expire\n   * @param ttl - Time to live in seconds\n   */\n  expire(key: string, ttl: number): Promise<void>;\n}\n\nexport interface StorageOptions {\n  /** Time to live in seconds */\n  ttl?: number;\n  /** Tags for categorization */\n  tags?: string[];\n  /** Metadata */\n  metadata?: Record<string, unknown>;\n}\n\nexport interface QueryOptions {\n  /** Maximum number of results */\n  limit?: number;\n  /** Offset for pagination */\n  offset?: number;\n  /** Sort field and direction */\n  sort?: {\n    field: string;\n    direction: 'asc' | 'desc';\n  };\n}\n\n/**\n * In-Memory Storage Adapter (for development/testing)\n */\nexport class MemoryStorageAdapter implements IStorageAdapter {\n  private store = new Map<string, { value: unknown; expires?: number }>();\n\n  async get<T = unknown>(key: string): Promise<T | null> {\n    const entry = this.store.get(key);\n    if (!entry) return null;\n    \n    if (entry.expires && Date.now() > entry.expires) {\n      this.store.delete(key);\n      return null;\n    }\n    \n    return entry.value as T;\n  }\n\n  async set<T = unknown>(\n    key: string,\n    value: T,\n    options?: StorageOptions\n  ): Promise<void> {\n    const entry: { value: unknown; expires?: number } = { value };\n    \n    if (options?.ttl) {\n      entry.expires = Date.now() + options.ttl * 1000;\n    }\n    \n    this.store.set(key, entry);\n  }\n\n  async delete(key: string): Promise<boolean> {\n    return this.store.delete(key);\n  }\n\n  async query<T = unknown>(\n    filter: Record<string, unknown>,\n    options?: QueryOptions\n  ): Promise<T[]> {\n    let results: T[] = [];\n    \n    for (const [, entry] of this.store) {\n      if (entry.expires && Date.now() > entry.expires) continue;\n      \n      const matches = Object.entries(filter).every(([key, value]) => {\n        const obj = entry.value as Record<string, unknown>;\n        return obj[key] === value;\n      });\n      \n      if (matches) {\n        results.push(entry.value as T);\n      }\n    }\n    \n    if (options?.limit) {\n      const start = options.offset || 0;\n      results = results.slice(start, start + options.limit);\n    }\n    \n    return results;\n  }\n\n  async exists(key: string): Promise<boolean> {\n    return this.store.has(key);\n  }\n\n  async clear(confirm: boolean): Promise<void> {\n    if (!confirm) {\n      throw new Error('Must confirm clear operation');\n    }\n    this.store.clear();\n  }\n\n  async mget<T = unknown>(keys: string[]): Promise<(T | null)[]> {\n    return Promise.all(keys.map(key => this.get<T>(key)));\n  }\n\n  async mset<T = unknown>(entries: [string, T][]): Promise<void> {\n    await Promise.all(\n      entries.map(([key, value]) => this.set(key, value))\n    );\n  }\n\n  async increment(key: string, amount = 1): Promise<number> {\n    const current = await this.get<number>(key);\n    const newValue = (current || 0) + amount;\n    await this.set(key, newValue);\n    return newValue;\n  }\n\n  async expire(key: string, ttl: number): Promise<void> {\n    const entry = this.store.get(key);\n    if (entry) {\n      entry.expires = Date.now() + ttl * 1000;\n    }\n  }\n}\n","/**\n * Event Bus Interface\n * Provides abstraction for event-driven communication\n * Used for AG-UI protocol, monitoring, agent coordination\n */\n\nexport type EventHandler<T = unknown> = (data: T) => void | Promise<void>;\n\nexport interface IEventBus {\n  /**\n   * Emit an event\n   * @param event - Event name\n   * @param data - Event payload\n   */\n  emit<T = unknown>(event: string, data: T): Promise<void>;\n\n  /**\n   * Subscribe to an event\n   * @param event - Event name or pattern\n   * @param handler - Event handler function\n   * @returns Unsubscribe function\n   */\n  on<T = unknown>(event: string, handler: EventHandler<T>): () => void;\n\n  /**\n   * Subscribe to an event (one-time)\n   * @param event - Event name\n   * @param handler - Event handler function\n   */\n  once<T = unknown>(event: string, handler: EventHandler<T>): void;\n\n  /**\n   * Unsubscribe from an event\n   * @param event - Event name\n   * @param handler - Handler to remove (optional, removes all if omitted)\n   */\n  off<T = unknown>(event: string, handler?: EventHandler<T>): void;\n\n  /**\n   * Remove all event listeners\n   */\n  removeAllListeners(): void;\n\n  /**\n   * Get listener count for an event\n   * @param event - Event name\n   */\n  listenerCount(event: string): number;\n}\n\n/**\n * In-Memory Event Bus (for development/testing)\n */\nexport class MemoryEventBus implements IEventBus {\n  private listeners = new Map<string, Set<EventHandler>>();\n\n  async emit<T = unknown>(event: string, data: T): Promise<void> {\n    const handlers = this.listeners.get(event);\n    if (!handlers) return;\n\n    await Promise.all(\n      Array.from(handlers).map(handler => handler(data))\n    );\n  }\n\n  on<T = unknown>(event: string, handler: EventHandler<T>): () => void {\n    if (!this.listeners.has(event)) {\n      this.listeners.set(event, new Set());\n    }\n    \n    this.listeners.get(event)!.add(handler as EventHandler);\n    \n    // Return unsubscribe function\n    return () => this.off(event, handler);\n  }\n\n  once<T = unknown>(event: string, handler: EventHandler<T>): void {\n    const onceWrapper: EventHandler<T> = async (data) => {\n      this.off(event, onceWrapper);\n      await handler(data);\n    };\n    \n    this.on(event, onceWrapper);\n  }\n\n  off<T = unknown>(event: string, handler?: EventHandler<T>): void {\n    if (!handler) {\n      this.listeners.delete(event);\n      return;\n    }\n    \n    const handlers = this.listeners.get(event);\n    if (handlers) {\n      handlers.delete(handler as EventHandler);\n      if (handlers.size === 0) {\n        this.listeners.delete(event);\n      }\n    }\n  }\n\n  removeAllListeners(): void {\n    this.listeners.clear();\n  }\n\n  listenerCount(event: string): number {\n    return this.listeners.get(event)?.size || 0;\n  }\n}\n","/**\n * Job Queue Interface\n * Provides abstraction for async job scheduling and execution\n * Used for workflow orchestration, scheduled tasks, background processing\n */\n\nexport interface Job<T = unknown> {\n  /** Unique job identifier */\n  id: string;\n  /** Job type/name */\n  type: string;\n  /** Job payload data */\n  data: T;\n  /** Priority (higher = more important) */\n  priority?: number;\n  /** Retry configuration */\n  retry?: {\n    maxAttempts: number;\n    backoff?: 'exponential' | 'linear' | 'fixed';\n    delay?: number;\n  };\n  /** Schedule (cron expression or delay in ms) */\n  schedule?: string | number;\n  /** Timeout in ms */\n  timeout?: number;\n  /** Tags for categorization */\n  tags?: string[];\n  /** Metadata */\n  metadata?: Record<string, unknown>;\n}\n\nexport interface JobResult<T = unknown> {\n  /** Job ID */\n  jobId: string;\n  /** Execution status */\n  status: 'completed' | 'failed' | 'cancelled';\n  /** Result data (if completed) */\n  result?: T;\n  /** Error (if failed) */\n  error?: Error;\n  /** Execution time in ms */\n  executionTime?: number;\n  /** Attempt number */\n  attempt?: number;\n}\n\nexport interface JobStatus {\n  /** Job ID */\n  id: string;\n  /** Current status */\n  status: 'pending' | 'running' | 'completed' | 'failed' | 'cancelled' | 'scheduled';\n  /** Progress (0-100) */\n  progress?: number;\n  /** Current attempt */\n  attempt?: number;\n  /** Max attempts */\n  maxAttempts?: number;\n  /** Created timestamp */\n  createdAt: Date;\n  /** Started timestamp */\n  startedAt?: Date;\n  /** Completed timestamp */\n  completedAt?: Date;\n  /** Error message */\n  error?: string;\n  /** Result preview */\n  result?: unknown;\n}\n\nexport type JobHandler<T = unknown, R = unknown> = (\n  job: Job<T>\n) => Promise<R> | R;\n\nexport interface IJobQueue {\n  /**\n   * Enqueue a new job\n   * @param job - Job configuration\n   * @returns Job ID\n   */\n  enqueue<T = unknown>(job: Omit<Job<T>, 'id'>): Promise<string>;\n\n  /**\n   * Dequeue and execute the next job\n   * @returns Job result or null if queue is empty\n   */\n  dequeue<T = unknown>(): Promise<JobResult<T> | null>;\n\n  /**\n   * Get job status\n   * @param jobId - Job ID\n   * @returns Job status or null if not found\n   */\n  getStatus(jobId: string): Promise<JobStatus | null>;\n\n  /**\n   * Cancel a pending/running job\n   * @param jobId - Job ID\n   * @returns True if cancelled\n   */\n  cancel(jobId: string): Promise<boolean>;\n\n  /**\n   * Register a job handler\n   * @param type - Job type\n   * @param handler - Handler function\n   */\n  registerHandler<T = unknown, R = unknown>(\n    type: string,\n    handler: JobHandler<T, R>\n  ): void;\n\n  /**\n   * Process jobs continuously\n   * @param concurrency - Number of concurrent jobs\n   */\n  startProcessing(concurrency?: number): Promise<void>;\n\n  /**\n   * Stop processing jobs\n   */\n  stopProcessing(): Promise<void>;\n\n  /**\n   * Get queue statistics\n   */\n  getStats(): Promise<QueueStats>;\n\n  /**\n   * Clear completed/failed jobs\n   * @param olderThan - Clear jobs older than timestamp\n   */\n  clearJobs(olderThan?: Date): Promise<number>;\n}\n\nexport interface QueueStats {\n  /** Total pending jobs */\n  pending: number;\n  /** Total running jobs */\n  running: number;\n  /** Total completed jobs */\n  completed: number;\n  /** Total failed jobs */\n  failed: number;\n  /** Total cancelled jobs */\n  cancelled: number;\n  /** Average execution time (ms) */\n  avgExecutionTime?: number;\n  /** Success rate (0-1) */\n  successRate?: number;\n}\n\n/**\n * In-Memory Job Queue (for development/testing)\n */\nexport class MemoryJobQueue implements IJobQueue {\n  private jobs = new Map<string, Job & { status: JobStatus }>();\n  private handlers = new Map<string, JobHandler>();\n  private processing = false;\n  private concurrency = 1;\n\n  async enqueue<T = unknown>(job: Omit<Job<T>, 'id'>): Promise<string> {\n    const id = `job_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n    \n    const fullJob: Job<T> & { status: JobStatus } = {\n      id,\n      ...job,\n      status: {\n        id,\n        status: 'pending',\n        createdAt: new Date(),\n        attempt: 0,\n        maxAttempts: job.retry?.maxAttempts || 1,\n      },\n    };\n    \n    this.jobs.set(id, fullJob as Job & { status: JobStatus });\n    return id;\n  }\n\n  async dequeue<T = unknown>(): Promise<JobResult<T> | null> {\n    const pendingJob = Array.from(this.jobs.values()).find(\n      j => j.status.status === 'pending'\n    );\n    \n    if (!pendingJob) return null;\n\n    const handler = this.handlers.get(pendingJob.type);\n    if (!handler) {\n      throw new Error(`No handler registered for job type: ${pendingJob.type}`);\n    }\n\n    pendingJob.status.status = 'running';\n    pendingJob.status.startedAt = new Date();\n    pendingJob.status.attempt = (pendingJob.status.attempt || 0) + 1;\n\n    const startTime = Date.now();\n\n    try {\n      const result = await handler(pendingJob);\n      \n      pendingJob.status.status = 'completed';\n      pendingJob.status.completedAt = new Date();\n      pendingJob.status.result = result;\n\n      return {\n        jobId: pendingJob.id,\n        status: 'completed',\n        result: result as T,\n        executionTime: Date.now() - startTime,\n        attempt: pendingJob.status.attempt,\n      };\n    } catch (error) {\n      const shouldRetry = pendingJob.status.attempt! < (pendingJob.status.maxAttempts || 1);\n      \n      if (shouldRetry) {\n        pendingJob.status.status = 'pending';\n      } else {\n        pendingJob.status.status = 'failed';\n        pendingJob.status.completedAt = new Date();\n        pendingJob.status.error = error instanceof Error ? error.message : String(error);\n      }\n\n      return {\n        jobId: pendingJob.id,\n        status: 'failed',\n        error: error instanceof Error ? error : new Error(String(error)),\n        executionTime: Date.now() - startTime,\n        attempt: pendingJob.status.attempt,\n      };\n    }\n  }\n\n  async getStatus(jobId: string): Promise<JobStatus | null> {\n    const job = this.jobs.get(jobId);\n    return job?.status || null;\n  }\n\n  async cancel(jobId: string): Promise<boolean> {\n    const job = this.jobs.get(jobId);\n    if (!job || job.status.status === 'completed') return false;\n\n    job.status.status = 'cancelled';\n    job.status.completedAt = new Date();\n    return true;\n  }\n\n  registerHandler<T = unknown, R = unknown>(\n    type: string,\n    handler: JobHandler<T, R>\n  ): void {\n    this.handlers.set(type, handler as JobHandler);\n  }\n\n  async startProcessing(concurrency = 1): Promise<void> {\n    this.processing = true;\n    this.concurrency = concurrency;\n\n    const processLoop = async () => {\n      while (this.processing) {\n        const result = await this.dequeue();\n        if (!result) {\n          await new Promise(resolve => setTimeout(resolve, 100));\n        }\n      }\n    };\n\n    const workers = Array.from({ length: concurrency }, () => processLoop());\n    await Promise.all(workers);\n  }\n\n  async stopProcessing(): Promise<void> {\n    this.processing = false;\n  }\n\n  async getStats(): Promise<QueueStats> {\n    const jobs = Array.from(this.jobs.values());\n    \n    return {\n      pending: jobs.filter(j => j.status.status === 'pending').length,\n      running: jobs.filter(j => j.status.status === 'running').length,\n      completed: jobs.filter(j => j.status.status === 'completed').length,\n      failed: jobs.filter(j => j.status.status === 'failed').length,\n      cancelled: jobs.filter(j => j.status.status === 'cancelled').length,\n    };\n  }\n\n  async clearJobs(olderThan?: Date): Promise<number> {\n    let cleared = 0;\n    \n    for (const [id, job] of this.jobs) {\n      const isDone = ['completed', 'failed', 'cancelled'].includes(job.status.status);\n      const isOld = !olderThan || (job.status.completedAt && job.status.completedAt < olderThan);\n      \n      if (isDone && isOld) {\n        this.jobs.delete(id);\n        cleared++;\n      }\n    }\n    \n    return cleared;\n  }\n}\n","/**\n * Tool Registry Interface\n * Provides abstraction for tool discovery, registration, and execution\n * Foundation for 80+ tools ecosystem\n */\n\nimport { z } from 'zod';\n\nexport interface Tool<TInput = unknown, TOutput = unknown> {\n  /** Unique tool identifier */\n  id: string;\n  /** Display name */\n  name: string;\n  /** Tool description */\n  description: string;\n  /** Category (data-analysis, web, communication, etc.) */\n  category: string;\n  /** Input schema (Zod schema) */\n  inputSchema: z.ZodSchema<TInput>;\n  /** Output schema (Zod schema) */\n  outputSchema: z.ZodSchema<TOutput>;\n  /** Tool execution function */\n  execute: (input: TInput) => Promise<TOutput> | TOutput;\n  /** Tags for searchability */\n  tags?: string[];\n  /** Version */\n  version?: string;\n  /** Required API keys/credentials */\n  requiredCredentials?: string[];\n  /** Cost estimate */\n  cost?: {\n    type: 'free' | 'usage-based' | 'subscription';\n    estimate?: string;\n  };\n  /** Rate limits */\n  rateLimit?: {\n    requests: number;\n    period: 'second' | 'minute' | 'hour' | 'day';\n  };\n  /** Documentation URL */\n  docsUrl?: string;\n  /** Examples */\n  examples?: ToolExample<TInput, TOutput>[];\n}\n\nexport interface ToolExample<TInput = unknown, TOutput = unknown> {\n  /** Example title */\n  title: string;\n  /** Example description */\n  description?: string;\n  /** Example input */\n  input: TInput;\n  /** Expected output */\n  output: TOutput;\n}\n\nexport interface ToolExecutionContext {\n  /** User ID (for rate limiting, analytics) */\n  userId?: string;\n  /** Session ID */\n  sessionId?: string;\n  /** Credentials/API keys */\n  credentials?: Record<string, string>;\n  /** Timeout in ms */\n  timeout?: number;\n  /** Retry configuration */\n  retry?: {\n    maxAttempts: number;\n    backoff?: 'exponential' | 'linear' | 'fixed';\n  };\n}\n\nexport interface ToolExecutionResult<TOutput = unknown> {\n  /** Tool ID */\n  toolId: string;\n  /** Execution status */\n  status: 'success' | 'error' | 'timeout' | 'rate-limited';\n  /** Result data (if success) */\n  data?: TOutput;\n  /** Error (if failed) */\n  error?: {\n    message: string;\n    code?: string;\n    details?: unknown;\n  };\n  /** Execution time in ms */\n  executionTime: number;\n  /** Cost incurred */\n  cost?: number;\n  /** Metadata */\n  metadata?: Record<string, unknown>;\n}\n\nexport interface IToolRegistry {\n  /**\n   * Register a new tool\n   * @param tool - Tool definition\n   */\n  register<TInput = unknown, TOutput = unknown>(\n    tool: Tool<TInput, TOutput>\n  ): void;\n\n  /**\n   * Get a tool by ID\n   * @param id - Tool ID\n   * @returns Tool definition or undefined\n   */\n  get<TInput = unknown, TOutput = unknown>(\n    id: string\n  ): Tool<TInput, TOutput> | undefined;\n\n  /**\n   * List all tools\n   * @param category - Filter by category (optional)\n   * @param tags - Filter by tags (optional)\n   * @returns Array of tools\n   */\n  list(category?: string, tags?: string[]): Tool[];\n\n  /**\n   * Search tools by query\n   * @param query - Search query\n   * @returns Array of matching tools\n   */\n  search(query: string): Tool[];\n\n  /**\n   * Execute a tool\n   * @param id - Tool ID\n   * @param input - Tool input\n   * @param context - Execution context\n   * @returns Execution result\n   */\n  execute<TInput = unknown, TOutput = unknown>(\n    id: string,\n    input: TInput,\n    context?: ToolExecutionContext\n  ): Promise<ToolExecutionResult<TOutput>>;\n\n  /**\n   * Unregister a tool\n   * @param id - Tool ID\n   * @returns True if unregistered\n   */\n  unregister(id: string): boolean;\n\n  /**\n   * Get tool categories\n   * @returns Array of unique categories\n   */\n  getCategories(): string[];\n\n  /**\n   * Get tools by category\n   * @param category - Category name\n   * @returns Array of tools\n   */\n  getByCategory(category: string): Tool[];\n}\n\n/**\n * In-Memory Tool Registry (default implementation)\n */\nexport class MemoryToolRegistry implements IToolRegistry {\n  private tools = new Map<string, Tool>();\n\n  register<TInput = unknown, TOutput = unknown>(\n    tool: Tool<TInput, TOutput>\n  ): void {\n    if (this.tools.has(tool.id)) {\n      throw new Error(`Tool with ID \"${tool.id}\" already registered`);\n    }\n    this.tools.set(tool.id, tool as Tool);\n  }\n\n  get<TInput = unknown, TOutput = unknown>(\n    id: string\n  ): Tool<TInput, TOutput> | undefined {\n    return this.tools.get(id) as Tool<TInput, TOutput> | undefined;\n  }\n\n  list(category?: string, tags?: string[]): Tool[] {\n    let tools = Array.from(this.tools.values());\n\n    if (category) {\n      tools = tools.filter(t => t.category === category);\n    }\n\n    if (tags && tags.length > 0) {\n      tools = tools.filter(t => \n        tags.some(tag => t.tags?.includes(tag))\n      );\n    }\n\n    return tools;\n  }\n\n  search(query: string): Tool[] {\n    const lowerQuery = query.toLowerCase();\n    \n    return Array.from(this.tools.values()).filter(tool =>\n      tool.name.toLowerCase().includes(lowerQuery) ||\n      tool.description.toLowerCase().includes(lowerQuery) ||\n      tool.tags?.some(tag => tag.toLowerCase().includes(lowerQuery))\n    );\n  }\n\n  async execute<TInput = unknown, TOutput = unknown>(\n    id: string,\n    input: TInput,\n    context?: ToolExecutionContext\n  ): Promise<ToolExecutionResult<TOutput>> {\n    const tool = this.get<TInput, TOutput>(id);\n    \n    if (!tool) {\n      return {\n        toolId: id,\n        status: 'error',\n        error: {\n          message: `Tool not found: ${id}`,\n          code: 'TOOL_NOT_FOUND',\n        },\n        executionTime: 0,\n      };\n    }\n\n    // Validate input\n    const validation = tool.inputSchema.safeParse(input);\n    if (!validation.success) {\n      return {\n        toolId: id,\n        status: 'error',\n        error: {\n          message: 'Invalid input',\n          code: 'VALIDATION_ERROR',\n          details: validation.error.format(),\n        },\n        executionTime: 0,\n      };\n    }\n\n    const startTime = Date.now();\n\n    try {\n      // Execute with timeout\n      const timeout = context?.timeout || 30000;\n      const result = await Promise.race([\n        tool.execute(validation.data),\n        new Promise<never>((_, reject) =>\n          setTimeout(() => reject(new Error('Timeout')), timeout)\n        ),\n      ]);\n\n      return {\n        toolId: id,\n        status: 'success',\n        data: result,\n        executionTime: Date.now() - startTime,\n      };\n    } catch (error) {\n      const isTimeout = error instanceof Error && error.message === 'Timeout';\n      \n      return {\n        toolId: id,\n        status: isTimeout ? 'timeout' : 'error',\n        error: {\n          message: error instanceof Error ? error.message : String(error),\n          code: isTimeout ? 'TIMEOUT' : 'EXECUTION_ERROR',\n        },\n        executionTime: Date.now() - startTime,\n      };\n    }\n  }\n\n  unregister(id: string): boolean {\n    return this.tools.delete(id);\n  }\n\n  getCategories(): string[] {\n    const categories = new Set(\n      Array.from(this.tools.values()).map(t => t.category)\n    );\n    return Array.from(categories).sort();\n  }\n\n  getByCategory(category: string): Tool[] {\n    return this.list(category);\n  }\n}\n","/**\n * Provider Registry Interface\n * Provides abstraction for LLM provider management\n * Foundation for 23+ provider ecosystem\n */\n\nimport { z } from 'zod';\n\nexport interface ProviderCapabilities {\n  /** Text generation */\n  textGeneration?: boolean;\n  /** Vision (image understanding) */\n  vision?: boolean;\n  /** Function calling */\n  functionCalling?: boolean;\n  /** Streaming */\n  streaming?: boolean;\n  /** JSON mode */\n  jsonMode?: boolean;\n  /** Multi-turn conversation */\n  conversation?: boolean;\n  /** Max context window (tokens) */\n  maxContextTokens?: number;\n  /** Max output tokens */\n  maxOutputTokens?: number;\n  /** Supported modalities */\n  modalities?: ('text' | 'image' | 'audio' | 'video')[];\n}\n\nexport interface ProviderModel {\n  /** Model ID */\n  id: string;\n  /** Display name */\n  name: string;\n  /** Model description */\n  description?: string;\n  /** Provider ID */\n  providerId: string;\n  /** Capabilities */\n  capabilities: ProviderCapabilities;\n  /** Pricing */\n  pricing?: {\n    input: number; // per 1M tokens\n    output: number; // per 1M tokens\n    currency: string;\n  };\n  /** Context window */\n  contextWindow: number;\n  /** Max output tokens */\n  maxOutputTokens?: number;\n  /** Deprecated */\n  deprecated?: boolean;\n}\n\nexport interface Provider {\n  /** Provider ID */\n  id: string;\n  /** Provider name */\n  name: string;\n  /** Provider description */\n  description?: string;\n  /** Available models */\n  models: ProviderModel[];\n  /** Base URL */\n  baseUrl?: string;\n  /** Authentication type */\n  authType?: 'api-key' | 'oauth' | 'none';\n  /** Required credentials */\n  requiredCredentials?: string[];\n  /** Health check endpoint */\n  healthCheckUrl?: string;\n}\n\nexport interface ProviderRequest {\n  /** Model ID */\n  model: string;\n  /** Prompt/messages */\n  prompt: string | Message[];\n  /** Temperature (0-2) */\n  temperature?: number;\n  /** Max tokens */\n  maxTokens?: number;\n  /** Top P */\n  topP?: number;\n  /** Stop sequences */\n  stop?: string[];\n  /** Stream response */\n  stream?: boolean;\n  /** System prompt */\n  systemPrompt?: string;\n  /** Tools/functions */\n  tools?: Tool[];\n  /** JSON mode */\n  jsonMode?: boolean;\n  /** Seed for deterministic output */\n  seed?: number;\n}\n\nexport interface Message {\n  role: 'system' | 'user' | 'assistant' | 'tool';\n  content: string;\n  name?: string;\n  toolCallId?: string;\n}\n\nexport interface Tool {\n  name: string;\n  description: string;\n  parameters: z.ZodSchema;\n}\n\nexport interface ProviderResponse {\n  /** Generated text */\n  text: string;\n  /** Finish reason */\n  finishReason?: 'stop' | 'length' | 'tool-call' | 'content-filter';\n  /** Token usage */\n  usage?: {\n    promptTokens: number;\n    completionTokens: number;\n    totalTokens: number;\n  };\n  /** Tool calls */\n  toolCalls?: ToolCall[];\n  /** Model used */\n  model: string;\n  /** Provider ID */\n  providerId: string;\n  /** Execution time (ms) */\n  executionTime: number;\n  /** Cost estimate */\n  cost?: number;\n}\n\nexport interface ToolCall {\n  id: string;\n  name: string;\n  arguments: Record<string, unknown>;\n}\n\nexport interface ProviderHealth {\n  /** Provider ID */\n  providerId: string;\n  /** Health status */\n  status: 'healthy' | 'degraded' | 'down';\n  /** Response time (ms) */\n  responseTime?: number;\n  /** Last checked */\n  lastChecked: Date;\n  /** Error message */\n  error?: string;\n}\n\nexport interface IProviderRegistry {\n  /**\n   * Register a new provider\n   * @param provider - Provider definition\n   */\n  registerProvider(provider: Provider): void;\n\n  /**\n   * Get a provider by ID\n   * @param id - Provider ID\n   * @returns Provider or undefined\n   */\n  getProvider(id: string): Provider | undefined;\n\n  /**\n   * List all providers\n   * @returns Array of providers\n   */\n  listProviders(): Provider[];\n\n  /**\n   * Get a model by ID\n   * @param modelId - Model ID\n   * @returns Model and provider or undefined\n   */\n  getModel(modelId: string): { model: ProviderModel; provider: Provider } | undefined;\n\n  /**\n   * List all models\n   * @param filters - Optional filters\n   * @returns Array of models\n   */\n  listModels(filters?: {\n    providerId?: string;\n    capabilities?: Partial<ProviderCapabilities>;\n    maxCost?: number;\n  }): ProviderModel[];\n\n  /**\n   * Execute a request\n   * @param request - Provider request\n   * @param credentials - API keys/credentials\n   * @returns Provider response\n   */\n  execute(\n    request: ProviderRequest,\n    credentials: Record<string, string>\n  ): Promise<ProviderResponse>;\n\n  /**\n   * Check provider health\n   * @param providerId - Provider ID\n   * @returns Health status\n   */\n  checkHealth(providerId: string): Promise<ProviderHealth>;\n\n  /**\n   * Get provider statistics\n   * @param providerId - Provider ID\n   * @returns Usage statistics\n   */\n  getStats(providerId: string): Promise<ProviderStats>;\n}\n\nexport interface ProviderStats {\n  /** Provider ID */\n  providerId: string;\n  /** Total requests */\n  totalRequests: number;\n  /** Successful requests */\n  successfulRequests: number;\n  /** Failed requests */\n  failedRequests: number;\n  /** Average response time (ms) */\n  avgResponseTime: number;\n  /** Total tokens */\n  totalTokens: number;\n  /** Total cost */\n  totalCost: number;\n  /** Last 24h requests */\n  last24hRequests: number;\n}\n\n/**\n * In-Memory Provider Registry (default implementation)\n */\nexport class MemoryProviderRegistry implements IProviderRegistry {\n  private providers = new Map<string, Provider>();\n  private stats = new Map<string, ProviderStats>();\n\n  registerProvider(provider: Provider): void {\n    if (this.providers.has(provider.id)) {\n      throw new Error(`Provider with ID \"${provider.id}\" already registered`);\n    }\n    this.providers.set(provider.id, provider);\n    \n    this.stats.set(provider.id, {\n      providerId: provider.id,\n      totalRequests: 0,\n      successfulRequests: 0,\n      failedRequests: 0,\n      avgResponseTime: 0,\n      totalTokens: 0,\n      totalCost: 0,\n      last24hRequests: 0,\n    });\n  }\n\n  getProvider(id: string): Provider | undefined {\n    return this.providers.get(id);\n  }\n\n  listProviders(): Provider[] {\n    return Array.from(this.providers.values());\n  }\n\n  getModel(modelId: string): { model: ProviderModel; provider: Provider } | undefined {\n    for (const provider of this.providers.values()) {\n      const model = provider.models.find(m => m.id === modelId);\n      if (model) {\n        return { model, provider };\n      }\n    }\n    return undefined;\n  }\n\n  listModels(filters?: {\n    providerId?: string;\n    capabilities?: Partial<ProviderCapabilities>;\n    maxCost?: number;\n  }): ProviderModel[] {\n    let models: ProviderModel[] = [];\n\n    for (const provider of this.providers.values()) {\n      if (filters?.providerId && provider.id !== filters.providerId) {\n        continue;\n      }\n      models.push(...provider.models);\n    }\n\n    if (filters?.capabilities) {\n      models = models.filter(model => {\n        return Object.entries(filters.capabilities!).every(([key, value]) => {\n          const capability = model.capabilities[key as keyof ProviderCapabilities];\n          return capability === value;\n        });\n      });\n    }\n\n    if (filters?.maxCost !== undefined) {\n      models = models.filter(model => {\n        if (!model.pricing) return true;\n        return model.pricing.output <= filters.maxCost!;\n      });\n    }\n\n    return models;\n  }\n\n  async execute(\n    request: ProviderRequest,\n    credentials: Record<string, string>\n  ): Promise<ProviderResponse> {\n    const modelInfo = this.getModel(request.model);\n    \n    if (!modelInfo) {\n      throw new Error(`Model not found: ${request.model}`);\n    }\n\n    // This is a placeholder - actual execution happens in provider adapters\n    throw new Error('Execute must be implemented by provider adapters');\n  }\n\n  async checkHealth(providerId: string): Promise<ProviderHealth> {\n    const provider = this.getProvider(providerId);\n    \n    if (!provider) {\n      return {\n        providerId,\n        status: 'down',\n        lastChecked: new Date(),\n        error: 'Provider not found',\n      };\n    }\n\n    // Placeholder - actual health check implementation\n    return {\n      providerId,\n      status: 'healthy',\n      responseTime: 100,\n      lastChecked: new Date(),\n    };\n  }\n\n  async getStats(providerId: string): Promise<ProviderStats> {\n    const stats = this.stats.get(providerId);\n    \n    if (!stats) {\n      throw new Error(`Provider not found: ${providerId}`);\n    }\n\n    return stats;\n  }\n}\n","/**\n * WAI SDK Configuration\n * Type-safe configuration with validation\n */\n\nimport { z } from 'zod';\n\n/**\n * Configuration schema\n */\nexport const WAIConfigSchema = z.object({\n  // Core settings\n  studioId: z.string().min(1),\n  environment: z.enum(['development', 'staging', 'production']).default('development'),\n  \n  // Features\n  features: z.object({\n    monitoring: z.boolean().default(true),\n    caching: z.boolean().default(true),\n    streaming: z.boolean().default(true),\n    multiModal: z.boolean().default(false),\n  }).default({}),\n  \n  // Storage configuration\n  storage: z.object({\n    type: z.enum(['memory', 'postgresql', 'redis']).default('memory'),\n    connectionString: z.string().optional(),\n    ttl: z.number().optional(),\n  }).default({ type: 'memory' }),\n  \n  // Event bus configuration\n  eventBus: z.object({\n    type: z.enum(['memory', 'redis', 'kafka']).default('memory'),\n    connectionString: z.string().optional(),\n  }).default({ type: 'memory' }),\n  \n  // Job queue configuration\n  jobQueue: z.object({\n    type: z.enum(['memory', 'postgresql', 'redis']).default('memory'),\n    connectionString: z.string().optional(),\n    concurrency: z.number().min(1).max(100).default(10),\n  }).default({ type: 'memory', concurrency: 10 }),\n  \n  // Orchestration settings\n  orchestration: z.object({\n    maxRetries: z.number().min(0).max(10).default(3),\n    timeout: z.number().min(1000).default(30000),\n    costOptimization: z.boolean().default(true),\n    qualityThreshold: z.number().min(0).max(1).default(0.8),\n  }).default({}),\n  \n  // Logging\n  logging: z.object({\n    level: z.enum(['debug', 'info', 'warn', 'error']).default('info'),\n    format: z.enum(['json', 'text']).default('text'),\n  }).default({}),\n  \n  // API keys (optional, can be provided separately)\n  apiKeys: z.record(z.string()).optional(),\n});\n\nexport type WAIConfig = z.infer<typeof WAIConfigSchema>;\n\n/**\n * Default configuration\n */\nexport const defaultConfig: WAIConfig = {\n  studioId: 'default',\n  environment: 'development',\n  features: {\n    monitoring: true,\n    caching: true,\n    streaming: true,\n    multiModal: false,\n  },\n  storage: {\n    type: 'memory',\n  },\n  eventBus: {\n    type: 'memory',\n  },\n  jobQueue: {\n    type: 'memory',\n    concurrency: 10,\n  },\n  orchestration: {\n    maxRetries: 3,\n    timeout: 30000,\n    costOptimization: true,\n    qualityThreshold: 0.8,\n  },\n  logging: {\n    level: 'info',\n    format: 'text',\n  },\n};\n\n/**\n * Create validated configuration\n */\nexport function createConfig(config: Partial<WAIConfig>): WAIConfig {\n  const merged = {\n    ...defaultConfig,\n    ...config,\n    features: { ...defaultConfig.features, ...config.features },\n    storage: { ...defaultConfig.storage, ...config.storage },\n    eventBus: { ...defaultConfig.eventBus, ...config.eventBus },\n    jobQueue: { ...defaultConfig.jobQueue, ...config.jobQueue },\n    orchestration: { ...defaultConfig.orchestration, ...config.orchestration },\n    logging: { ...defaultConfig.logging, ...config.logging },\n  };\n\n  return WAIConfigSchema.parse(merged);\n}\n\n/**\n * Load configuration from environment variables\n */\nexport function loadConfigFromEnv(): Partial<WAIConfig> {\n  return {\n    studioId: process.env.WAI_STUDIO_ID,\n    environment: (process.env.WAI_ENVIRONMENT || process.env.NODE_ENV) as any,\n    \n    storage: process.env.DATABASE_URL ? {\n      type: 'postgresql',\n      connectionString: process.env.DATABASE_URL,\n    } : undefined,\n    \n    eventBus: process.env.REDIS_URL ? {\n      type: 'redis',\n      connectionString: process.env.REDIS_URL,\n    } : undefined,\n    \n    jobQueue: process.env.DATABASE_URL ? {\n      type: 'postgresql',\n      connectionString: process.env.DATABASE_URL,\n      concurrency: 10,\n    } : undefined,\n    \n    apiKeys: {\n      OPENAI_API_KEY: process.env.OPENAI_API_KEY,\n      ANTHROPIC_API_KEY: process.env.ANTHROPIC_API_KEY,\n      GEMINI_API_KEY: process.env.GEMINI_API_KEY,\n      ELEVENLABS_API_KEY: process.env.ELEVENLABS_API_KEY,\n      RUNWAY_API_KEY: process.env.RUNWAY_API_KEY,\n    } as Record<string, string>,\n  };\n}\n","/**\n * Dependency Injection Container\n * Lightweight DI implementation for WAI SDK\n * Enables framework-agnostic architecture with clean dependency management\n */\n\ntype Constructor<T = any> = new (...args: any[]) => T;\ntype Factory<T = any> = (container: DIContainer) => T;\ntype Lifecycle = 'singleton' | 'transient' | 'scoped';\n\ninterface ServiceRegistration<T = any> {\n  factory: Factory<T>;\n  lifecycle: Lifecycle;\n  instance?: T;\n}\n\nexport class DIContainer {\n  private services = new Map<string | symbol, ServiceRegistration>();\n  private scopedInstances = new Map<string | symbol, any>();\n\n  /**\n   * Register a service\n   * @param token - Service identifier (string, symbol, or class)\n   * @param factory - Factory function or class constructor\n   * @param lifecycle - Service lifecycle (singleton, transient, scoped)\n   */\n  register<T>(\n    token: string | symbol | Constructor<T>,\n    factory: Factory<T> | Constructor<T>,\n    lifecycle: Lifecycle = 'singleton'\n  ): this {\n    const serviceToken = typeof token === 'function' ? token.name : token;\n    \n    const normalizedFactory: Factory<T> = \n      typeof factory === 'function' && factory.prototype\n        ? (container: DIContainer) => new (factory as Constructor<T>)(container)\n        : factory as Factory<T>;\n\n    this.services.set(serviceToken, {\n      factory: normalizedFactory,\n      lifecycle,\n    });\n\n    return this;\n  }\n\n  /**\n   * Register a singleton service\n   */\n  singleton<T>(\n    token: string | symbol | Constructor<T>,\n    factory: Factory<T> | Constructor<T>\n  ): this {\n    return this.register(token, factory, 'singleton');\n  }\n\n  /**\n   * Register a transient service (new instance every time)\n   */\n  transient<T>(\n    token: string | symbol | Constructor<T>,\n    factory: Factory<T> | Constructor<T>\n  ): this {\n    return this.register(token, factory, 'transient');\n  }\n\n  /**\n   * Register a scoped service (one instance per scope)\n   */\n  scoped<T>(\n    token: string | symbol | Constructor<T>,\n    factory: Factory<T> | Constructor<T>\n  ): this {\n    return this.register(token, factory, 'scoped');\n  }\n\n  /**\n   * Register an instance directly\n   */\n  instance<T>(token: string | symbol | Constructor<T>, instance: T): this {\n    const serviceToken = typeof token === 'function' ? token.name : token;\n    \n    this.services.set(serviceToken, {\n      factory: () => instance,\n      lifecycle: 'singleton',\n      instance,\n    });\n\n    return this;\n  }\n\n  /**\n   * Resolve a service\n   */\n  resolve<T>(token: string | symbol | Constructor<T>): T {\n    const serviceToken = typeof token === 'function' ? token.name : token;\n    const registration = this.services.get(serviceToken);\n\n    if (!registration) {\n      throw new Error(\n        `Service not registered: ${String(serviceToken)}\\n` +\n        `Available services: ${Array.from(this.services.keys()).join(', ')}`\n      );\n    }\n\n    switch (registration.lifecycle) {\n      case 'singleton':\n        if (!registration.instance) {\n          registration.instance = registration.factory(this);\n        }\n        return registration.instance as T;\n\n      case 'scoped':\n        if (!this.scopedInstances.has(serviceToken)) {\n          this.scopedInstances.set(serviceToken, registration.factory(this));\n        }\n        return this.scopedInstances.get(serviceToken) as T;\n\n      case 'transient':\n        return registration.factory(this) as T;\n\n      default:\n        throw new Error(`Unknown lifecycle: ${registration.lifecycle}`);\n    }\n  }\n\n  /**\n   * Check if a service is registered\n   */\n  has(token: string | symbol | Constructor): boolean {\n    const serviceToken = typeof token === 'function' ? token.name : token;\n    return this.services.has(serviceToken);\n  }\n\n  /**\n   * Clear scoped instances (for request-scoped services)\n   */\n  clearScope(): void {\n    this.scopedInstances.clear();\n  }\n\n  /**\n   * Create a child container (inherits parent services)\n   */\n  createChild(): DIContainer {\n    const child = new DIContainer();\n    \n    // Copy parent services to child\n    for (const [token, registration] of this.services) {\n      child.services.set(token, { ...registration });\n    }\n    \n    return child;\n  }\n\n  /**\n   * Get all registered service tokens\n   */\n  getRegisteredServices(): (string | symbol)[] {\n    return Array.from(this.services.keys());\n  }\n\n  /**\n   * Clear all services\n   */\n  clear(): void {\n    this.services.clear();\n    this.scopedInstances.clear();\n  }\n}\n\n/**\n * Service tokens (for type-safe dependency injection)\n */\nexport const ServiceTokens = {\n  // Core services\n  StorageAdapter: Symbol('IStorageAdapter'),\n  EventBus: Symbol('IEventBus'),\n  JobQueue: Symbol('IJobQueue'),\n  ToolRegistry: Symbol('IToolRegistry'),\n  ProviderRegistry: Symbol('IProviderRegistry'),\n  \n  // Orchestration\n  OrchestrationCore: Symbol('OrchestrationCore'),\n  OrchestrationFacade: Symbol('OrchestrationFacade'),\n  RoutingRegistry: Symbol('RoutingRegistry'),\n  RequestBuilder: Symbol('RequestBuilder'),\n  \n  // Protocols\n  MCPServer: Symbol('MCPServer'),\n  ROMAManager: Symbol('ROMAManager'),\n  BMADFramework: Symbol('BMADFramework'),\n  ParlantStandards: Symbol('ParlantStandards'),\n  A2ACollaborationBus: Symbol('A2ACollaborationBus'),\n  AGUIEventBridge: Symbol('AGUIEventBridge'),\n  \n  // Memory\n  Mem0Client: Symbol('Mem0Client'),\n  CAMMonitoring: Symbol('CAMMonitoring'),\n  VectorStore: Symbol('VectorStore'),\n  \n  // Agents\n  AgentCatalog: Symbol('AgentCatalog'),\n  AgentCoordinator: Symbol('AgentCoordinator'),\n  \n  // Workflows\n  WorkflowScheduler: Symbol('WorkflowScheduler'),\n  WorkflowExecutor: Symbol('WorkflowExecutor'),\n};\n\n/**\n * Global container instance (optional)\n */\nexport const globalContainer = new DIContainer();\n","/**\n * WAI Request Builder\n * \n * Type-safe builder for WAI Orchestration requests using Zod validation.\n * Provides fluent API for constructing valid orchestration requests with compile-time\n * and runtime type safety.\n * \n * Phase 2.3: Production-ready request builder with Zod schemas\n */\n\nimport { z } from 'zod';\nimport { randomUUID } from 'crypto';\nimport WAIOrchestrationCoreV9 from '../orchestration/wai-orchestration-core-v9';\nimport { AGUIWAIIntegrationService } from '../services/agui-wai-integration-service';\n\n// ================================================================================================\n// ZOD SCHEMAS FOR VALIDATION\n// ================================================================================================\n\n/**\n * Orchestration request type schema\n */\nexport const orchestrationTypeSchema = z.enum([\n  'development',\n  'creative',\n  'analysis',\n  'enterprise',\n  'hybrid'\n]);\n\n/**\n * Priority level schema\n */\nexport const prioritySchema = z.enum([\n  'low',\n  'medium',\n  'high',\n  'critical',\n  'quantum'\n]);\n\n/**\n * Orchestration preferences schema\n */\nexport const orchestrationPreferencesSchema = z.object({\n  costOptimization: z.boolean().optional(),\n  qualityThreshold: z.number().min(0).max(1).optional(),\n  timeConstraint: z.number().positive().optional(),\n  preferredProviders: z.array(z.string()).optional(),\n  prohibitedProviders: z.array(z.string()).optional()\n}).optional();\n\n/**\n * Complete WAI Orchestration Request schema\n */\nexport const waiOrchestrationRequestSchema = z.object({\n  id: z.string().uuid().optional(),\n  type: orchestrationTypeSchema,\n  task: z.string().min(1, 'Task description is required'),\n  priority: prioritySchema.default('medium'),\n  parameters: z.record(z.unknown()).optional(),\n  context: z.record(z.unknown()).optional(),\n  preferences: orchestrationPreferencesSchema,\n  metadata: z.record(z.unknown()).optional()\n});\n\n/**\n * Inferred TypeScript types from Zod schemas\n */\nexport type WAIOrchestrationRequestInput = z.infer<typeof waiOrchestrationRequestSchema>;\nexport type OrchestrationTypeInput = z.infer<typeof orchestrationTypeSchema>;\nexport type PriorityInput = z.infer<typeof prioritySchema>;\nexport type OrchestrationPreferencesInput = z.infer<typeof orchestrationPreferencesSchema>;\n\n// ================================================================================================\n// REQUEST BUILDER CLASS\n// ================================================================================================\n\n/**\n * Fluent builder for constructing type-safe WAI Orchestration requests\n * \n * @example\n * const request = new WAIRequestBuilder()\n *   .setType('development')\n *   .setTask('Create a React component for user authentication')\n *   .setPriority('high')\n *   .setPreferences({ costOptimization: true })\n *   .setContext({ projectId: '123', userId: 'user-456' })\n *   .build();\n */\nexport class WAIRequestBuilder {\n  private request: Partial<WAIOrchestrationRequestInput> = {\n    priority: 'medium'\n  };\n  private aguiSessionId?: string;\n  private waiCore?: WAIOrchestrationCoreV9;\n  private aguiService?: AGUIWAIIntegrationService;\n\n  /**\n   * Set the orchestration type\n   */\n  setType(type: OrchestrationTypeInput): this {\n    this.request.type = type;\n    return this;\n  }\n\n  /**\n   * Set the task description (required)\n   */\n  setTask(task: string): this {\n    this.request.task = task;\n    return this;\n  }\n\n  /**\n   * Set the priority level (default: medium)\n   */\n  setPriority(priority: PriorityInput): this {\n    this.request.priority = priority;\n    return this;\n  }\n\n  /**\n   * Set request parameters\n   */\n  setParameters(parameters: Record<string, unknown>): this {\n    this.request.parameters = parameters;\n    return this;\n  }\n\n  /**\n   * Add a single parameter\n   */\n  addParameter(key: string, value: unknown): this {\n    if (!this.request.parameters) {\n      this.request.parameters = {};\n    }\n    this.request.parameters[key] = value;\n    return this;\n  }\n\n  /**\n   * Set request context\n   */\n  setContext(context: Record<string, unknown>): this {\n    this.request.context = context;\n    return this;\n  }\n\n  /**\n   * Add a single context value\n   */\n  addContext(key: string, value: unknown): this {\n    if (!this.request.context) {\n      this.request.context = {};\n    }\n    this.request.context[key] = value;\n    return this;\n  }\n\n  /**\n   * Set orchestration preferences\n   */\n  setPreferences(preferences: OrchestrationPreferencesInput): this {\n    this.request.preferences = preferences;\n    return this;\n  }\n\n  /**\n   * Enable cost optimization\n   */\n  enableCostOptimization(enable = true): this {\n    if (!this.request.preferences) {\n      this.request.preferences = {};\n    }\n    this.request.preferences.costOptimization = enable;\n    return this;\n  }\n\n  /**\n   * Set quality threshold (0-1)\n   */\n  setQualityThreshold(threshold: number): this {\n    if (threshold < 0 || threshold > 1) {\n      throw new Error('Quality threshold must be between 0 and 1');\n    }\n    if (!this.request.preferences) {\n      this.request.preferences = {};\n    }\n    this.request.preferences.qualityThreshold = threshold;\n    return this;\n  }\n\n  /**\n   * Set time constraint in milliseconds\n   */\n  setTimeConstraint(milliseconds: number): this {\n    if (milliseconds <= 0) {\n      throw new Error('Time constraint must be positive');\n    }\n    if (!this.request.preferences) {\n      this.request.preferences = {};\n    }\n    this.request.preferences.timeConstraint = milliseconds;\n    return this;\n  }\n\n  /**\n   * Set preferred LLM providers\n   */\n  setPreferredProviders(providers: string[]): this {\n    if (!this.request.preferences) {\n      this.request.preferences = {};\n    }\n    this.request.preferences.preferredProviders = providers;\n    return this;\n  }\n\n  /**\n   * Set prohibited LLM providers\n   */\n  setProhibitedProviders(providers: string[]): this {\n    if (!this.request.preferences) {\n      this.request.preferences = {};\n    }\n    this.request.preferences.prohibitedProviders = providers;\n    return this;\n  }\n\n  /**\n   * Set request metadata\n   */\n  setMetadata(metadata: Record<string, unknown>): this {\n    this.request.metadata = metadata;\n    return this;\n  }\n\n  /**\n   * Add a single metadata value\n   */\n  addMetadata(key: string, value: unknown): this {\n    if (!this.request.metadata) {\n      this.request.metadata = {};\n    }\n    this.request.metadata[key] = value;\n    return this;\n  }\n\n  /**\n   * Enable AG-UI real-time streaming for this orchestration\n   * \n   * @param sessionId AG-UI session ID for real-time event streaming\n   * @param aguiService Optional AG-UI service instance (uses global if not provided)\n   * @returns this for method chaining\n   * \n   * @example\n   * const result = await new WAIRequestBuilder()\n   *   .setType('development')\n   *   .setTask('Build a login component')\n   *   .withAGUISession(sessionId, aguiService)\n   *   .execute();\n   */\n  withAGUISession(sessionId: string, aguiService?: AGUIWAIIntegrationService): this {\n    this.aguiSessionId = sessionId;\n    if (aguiService) {\n      this.aguiService = aguiService;\n    }\n    return this;\n  }\n\n  /**\n   * Set WAI Core instance for orchestration execution\n   * \n   * @param waiCore WAI Orchestration Core instance\n   * @returns this for method chaining\n   */\n  withWAICore(waiCore: WAIOrchestrationCoreV9): this {\n    this.waiCore = waiCore;\n    return this;\n  }\n\n  /**\n   * Execute the orchestration with full WAI SDK + AG-UI integration\n   * \n   * This method:\n   * 1. Validates the request\n   * 2. Emits AG-UI start event (if session configured)\n   * 3. Executes WAI orchestration\n   * 4. Emits thinking steps and tool calls (if session configured)\n   * 5. Emits completion/error events (if session configured)\n   * \n   * @returns Promise<OrchestrationResult> WAI orchestration result\n   * @throws {Error} If validation fails or orchestration errors\n   * \n   * @example\n   * const result = await new WAIRequestBuilder()\n   *   .setType('development')\n   *   .setTask('Create authentication system')\n   *   .withAGUISession(sessionId)\n   *   .withWAICore(waiCore)\n   *   .execute();\n   */\n  async execute(): Promise<any> {\n    // Build and validate request\n    const validatedRequest = this.build();\n    \n    // Require WAI Core for execution\n    if (!this.waiCore) {\n      throw new Error('WAI Core not configured. Use withWAICore() before calling execute()');\n    }\n\n    const agentId = this.request.metadata?.agentId as string || 'wai-orchestrator';\n    const startTime = Date.now();\n\n    try {\n      // Emit AG-UI start event\n      if (this.aguiSessionId && this.aguiService) {\n        this.aguiService.emitAgentStart(\n          this.aguiSessionId,\n          agentId,\n          validatedRequest.task,\n          {\n            type: validatedRequest.type,\n            priority: validatedRequest.priority,\n            preferences: validatedRequest.preferences,\n          }\n        );\n        \n        this.aguiService.emitThinking(\n          this.aguiSessionId,\n          'initialization',\n          'Initializing WAI SDK orchestration...',\n          agentId,\n          0.95,\n          `Starting ${validatedRequest.type} orchestration with priority: ${validatedRequest.priority}`\n        );\n      }\n\n      // Execute WAI orchestration\n      const result = await this.waiCore.processRequest({\n        type: validatedRequest.type,\n        task: validatedRequest.task,\n        priority: validatedRequest.priority,\n        preferences: validatedRequest.preferences,\n        context: validatedRequest.context,\n        metadata: validatedRequest.metadata,\n      });\n\n      // Emit AG-UI completion event\n      if (this.aguiSessionId && this.aguiService) {\n        this.aguiService.emitAgentComplete(\n          this.aguiSessionId,\n          agentId,\n          result.result || 'Orchestration completed successfully',\n          {\n            providersUsed: result.providersUsed || [],\n            modelsUsed: result.modelsUsed || [],\n            creditsUsed: result.creditsUsed || 0,\n            tokensUsed: result.tokensUsed || 0,\n            duration: Date.now() - startTime,\n            qualityScore: result.qualityScore,\n          }\n        );\n      }\n\n      return result;\n\n    } catch (error) {\n      // Emit AG-UI error event\n      if (this.aguiSessionId && this.aguiService) {\n        this.aguiService.emitAgentError(\n          this.aguiSessionId,\n          agentId,\n          error instanceof Error ? error.message : 'Unknown orchestration error',\n          {\n            errorType: error instanceof Error ? error.constructor.name : 'UnknownError',\n            stack: error instanceof Error ? error.stack : undefined,\n            duration: Date.now() - startTime,\n          }\n        );\n      }\n\n      throw error;\n    }\n  }\n\n  /**\n   * Build and validate the orchestration request\n   * \n   * @throws {z.ZodError} If validation fails\n   * @returns Validated WAI Orchestration Request\n   */\n  build(): WAIOrchestrationRequestInput {\n    // Generate UUID if not provided\n    if (!this.request.id) {\n      this.request.id = randomUUID();\n    }\n\n    // Validate the complete request using Zod schema\n    const validated = waiOrchestrationRequestSchema.parse(this.request);\n    \n    return validated;\n  }\n\n  /**\n   * Build with safe parsing (returns result or error)\n   */\n  safeBuild(): z.SafeParseReturnType<unknown, WAIOrchestrationRequestInput> {\n    // Generate UUID if not provided\n    if (!this.request.id) {\n      this.request.id = randomUUID();\n    }\n\n    return waiOrchestrationRequestSchema.safeParse(this.request);\n  }\n\n  /**\n   * Reset the builder to initial state\n   */\n  reset(): this {\n    this.request = {\n      priority: 'medium'\n    };\n    return this;\n  }\n\n  /**\n   * Clone the current builder state\n   */\n  clone(): WAIRequestBuilder {\n    const cloned = new WAIRequestBuilder();\n    cloned.request = { ...this.request };\n    return cloned;\n  }\n}\n\n// ================================================================================================\n// CONVENIENCE FACTORY FUNCTIONS\n// ================================================================================================\n\n/**\n * Create a development orchestration request\n */\nexport function createDevelopmentRequest(task: string): WAIRequestBuilder {\n  return new WAIRequestBuilder()\n    .setType('development')\n    .setTask(task);\n}\n\n/**\n * Create a creative orchestration request\n */\nexport function createCreativeRequest(task: string): WAIRequestBuilder {\n  return new WAIRequestBuilder()\n    .setType('creative')\n    .setTask(task);\n}\n\n/**\n * Create an analysis orchestration request\n */\nexport function createAnalysisRequest(task: string): WAIRequestBuilder {\n  return new WAIRequestBuilder()\n    .setType('analysis')\n    .setTask(task);\n}\n\n/**\n * Create an enterprise orchestration request\n */\nexport function createEnterpriseRequest(task: string): WAIRequestBuilder {\n  return new WAIRequestBuilder()\n    .setType('enterprise')\n    .setTask(task);\n}\n\n/**\n * Create a hybrid orchestration request\n */\nexport function createHybridRequest(task: string): WAIRequestBuilder {\n  return new WAIRequestBuilder()\n    .setType('hybrid')\n    .setTask(task);\n}\n\n/**\n * Validate an existing orchestration request object\n */\nexport function validateOrchestrationRequest(request: unknown): WAIOrchestrationRequestInput {\n  return waiOrchestrationRequestSchema.parse(request);\n}\n\n/**\n * Safe validation of orchestration request\n */\nexport function safeValidateOrchestrationRequest(\n  request: unknown\n): z.SafeParseReturnType<unknown, WAIOrchestrationRequestInput> {\n  return waiOrchestrationRequestSchema.safeParse(request);\n}\n","/**\n * Standalone Orchestration API\n * Minimal API for standalone WAI SDK usage\n * Full OrchestrationFacade, Core, and Routing available in Incubator integration\n */\n\nexport interface OrchestrationConfig {\n  apiKeys?: Record<string, string>;\n  defaultProvider?: string;\n  defaultModel?: string;\n}\n\nexport interface OrchestrationRequest {\n  prompt: string;\n  context?: Record<string, any>;\n  provider?: string;\n  model?: string;\n}\n\nexport interface OrchestrationResponse {\n  success: boolean;\n  result?: string;\n  error?: string;\n  metadata?: Record<string, any>;\n}\n\n/**\n * Standalone Orchestration Client\n * Lightweight client for direct LLM orchestration without Incubator platform\n */\nexport class StandaloneOrchestrationClient {\n  private config: OrchestrationConfig;\n\n  constructor(config: OrchestrationConfig = {}) {\n    this.config = config;\n  }\n\n  async execute(request: OrchestrationRequest): Promise<OrchestrationResponse> {\n    // Minimal implementation - will be enhanced in future versions\n    return {\n      success: false,\n      error: 'Standalone orchestration not yet implemented. Use @wai/providers directly or integrate with Incubator platform.',\n    };\n  }\n}\n\n// Re-export request builder for advanced users\nexport * from './request-builder';\n","/**\n * Wiring Services - Minimal Stubs for Standalone SDK\n * Full implementations require Incubator Platform integration\n * See INCUBATOR_INTEGRATION_NEEDED.md for details\n */\n\n// These are minimal exports to satisfy package build\n// Full implementations are in .incubator-only files and will be activated in Phase 2\n\nexport class ParlantWiringService {\n  async applyStandards(agentId: string, prompt: string): Promise<string> {\n    return prompt; // Passthrough in standalone mode\n  }\n}\n\nexport class DynamicModelSelectionWiringService {\n  async selectModel(requirements: any): Promise<string> {\n    return 'gpt-4o'; // Default model\n  }\n}\n\nexport class CostOptimizationWiringService {\n  async optimizeRequest(request: any): Promise<any> {\n    return request; // Passthrough\n  }\n}\n\nexport class SemanticCachingWiringService {\n  async getCached(key: string): Promise<any | null> {\n    return null; // No caching in standalone\n  }\n}\n\nexport class ContinuousLearningWiringService {\n  async recordFeedback(data: any): Promise<void> {\n    // No-op in standalone\n  }\n}\n\nexport class RealTimeOptimizationWiringService {\n  async optimize(request: any): Promise<any> {\n    return request;\n  }\n}\n\nexport class ContextEngineeringWiringService {\n  async optimizeContext(context: any): Promise<any> {\n    return context;\n  }\n}\n\nexport class A2AWiringService {\n  async facilitateCollaboration(agents: string[]): Promise<any> {\n    return { agents, status: 'stub' };\n  }\n}\n\nexport class ProviderArbitrageWiringService {\n  async selectProvider(requirements: any): Promise<string> {\n    return 'openai';\n  }\n}\n\nexport class BMADWiringService {\n  async applyBehaviors(agent: any): Promise<any> {\n    return agent;\n  }\n}\n\nexport class AgentCollaborationNetworkWiringService {\n  async createNetwork(agents: string[]): Promise<any> {\n    return { network: agents };\n  }\n}\n\nexport class IntelligentRoutingWiringService {\n  async routeRequest(request: any): Promise<string> {\n    return 'default-agent';\n  }\n}\n\nexport class GRPOWiringService {\n  async applyLearning(data: any): Promise<void> {\n    // No-op\n  }\n}\n\nexport class ClaudeExtendedThinkingWiringService {\n  async processWithThinking(task: string): Promise<any> {\n    return { task, result: 'stub' };\n  }\n}\n\nexport class MultiClockWiringService {\n  getPrimaryTime(): Date {\n    return new Date();\n  }\n}\n\nexport class QuantumSecurityWiringService {\n  async encrypt(data: string): Promise<string> {\n    return data; // No encryption in standalone stub\n  }\n}\n","/**\n * Parallel Processing Wiring Service\n * \n * Wires concurrent multi-agent execution into Wizards platform:\n * - Execute multiple agent tasks simultaneously (up to 20 concurrent)\n * - Intelligent load balancing across agents\n * - Batch processing for large task queues\n * - Real-time process tracking and metrics\n */\n\nimport { EventEmitter } from 'events';\n\ninterface AgentTask {\n  id: string;\n  agentId: string;\n  type: string;\n  priority: number;\n  parameters: any;\n  context?: any;\n}\n\ninterface ParallelProcessResult {\n  processId: string;\n  success: boolean;\n  results?: any[];\n  error?: Error;\n  executionTime: number;\n  tasksProcessed: number;\n}\n\ninterface ParallelProcessingMetrics {\n  totalProcessesExecuted: number;\n  totalTasksProcessed: number;\n  averageExecutionTime: number;\n  averageTasksPerProcess: number;\n  totalParallelTime: number;\n  averageConcurrency: number;\n  successRate: number;\n}\n\ninterface ActiveProcess {\n  id: string;\n  startTime: Date;\n  taskCount: number;\n  status: 'running' | 'completed' | 'failed';\n  progress: number;\n}\n\nexport class ParallelProcessingWiringService extends EventEmitter {\n  private metrics: ParallelProcessingMetrics;\n  private activeProcesses: Map<string, ActiveProcess> = new Map();\n  private maxParallelTasks: number = 20;\n  private processHistory: ParallelProcessResult[] = [];\n  private maxHistorySize: number = 100;\n  private isInitialized: boolean = false;\n  \n  constructor() {\n    super();\n    \n    this.metrics = {\n      totalProcessesExecuted: 0,\n      totalTasksProcessed: 0,\n      averageExecutionTime: 0,\n      averageTasksPerProcess: 0,\n      totalParallelTime: 0,\n      averageConcurrency: 0,\n      successRate: 0,\n    };\n    \n    this.initialize();\n  }\n  \n  /**\n   * Initialize parallel processing system\n   */\n  private initialize(): void {\n    try {\n      this.isInitialized = true;\n      \n      console.log(' Parallel Processing Wiring Service initialized');\n      console.log(` Max concurrent tasks: ${this.maxParallelTasks}`);\n      console.log(' Batch processing enabled for large queues');\n      console.log(' Intelligent load balancing active');\n    } catch (error) {\n      console.error(' Parallel Processing initialization failed:', error);\n      this.isInitialized = false;\n    }\n  }\n  \n  /**\n   * Process multiple tasks in parallel\n   */\n  async processInParallel(\n    tasks: AgentTask[],\n    options?: {\n      maxConcurrency?: number;\n      prioritySort?: boolean;\n      timeoutMs?: number;\n    }\n  ): Promise<ParallelProcessResult> {\n    if (!this.isInitialized) {\n      throw new Error('Parallel processing not initialized');\n    }\n    \n    const maxConcurrency = options?.maxConcurrency || this.maxParallelTasks;\n    const timeoutMs = options?.timeoutMs || 300000; // 5 minutes default\n    \n    const processId = `parallel_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n    const startTime = Date.now();\n    \n    console.log(` Starting parallel processing: ${processId}`);\n    console.log(`  Tasks: ${tasks.length}`);\n    console.log(`  Max concurrency: ${maxConcurrency}`);\n    \n    // Register active process\n    this.activeProcesses.set(processId, {\n      id: processId,\n      startTime: new Date(),\n      taskCount: tasks.length,\n      status: 'running',\n      progress: 0,\n    });\n    \n    // Sort by priority if requested\n    const sortedTasks = options?.prioritySort\n      ? [...tasks].sort((a, b) => b.priority - a.priority)\n      : tasks;\n    \n    try {\n      // Split into batches for controlled concurrency\n      const batches = this.createBatches(sortedTasks, maxConcurrency);\n      const allResults = [];\n      let completedTasks = 0;\n      \n      // Process each batch concurrently\n      for (let i = 0; i < batches.length; i++) {\n        const batch = batches[i];\n        \n        // Execute batch with timeout\n        const batchPromises = batch.map(task =>\n          this.executeTaskWithTimeout(task, timeoutMs)\n        );\n        \n        const batchResults = await Promise.allSettled(batchPromises);\n        allResults.push(...batchResults);\n        \n        // Update progress\n        completedTasks += batch.length;\n        const progress = (completedTasks / tasks.length) * 100;\n        \n        const activeProcess = this.activeProcesses.get(processId);\n        if (activeProcess) {\n          activeProcess.progress = progress;\n        }\n        \n        this.emit('progress', {\n          processId,\n          progress,\n          completedTasks,\n          totalTasks: tasks.length,\n          batch: i + 1,\n          totalBatches: batches.length,\n        });\n        \n        console.log(`  Progress: ${completedTasks}/${tasks.length} tasks (${progress.toFixed(1)}%)`);\n      }\n      \n      // Calculate results\n      const successCount = allResults.filter(r => r.status === 'fulfilled').length;\n      const executionTime = Date.now() - startTime;\n      \n      const result: ParallelProcessResult = {\n        processId,\n        success: true,\n        results: allResults,\n        executionTime,\n        tasksProcessed: tasks.length,\n      };\n      \n      // Update active process status\n      const activeProcess = this.activeProcesses.get(processId);\n      if (activeProcess) {\n        activeProcess.status = 'completed';\n        activeProcess.progress = 100;\n      }\n      \n      // Update metrics\n      this.updateMetrics(result, successCount, tasks.length);\n      \n      // Store in history\n      this.addToHistory(result);\n      \n      console.log(` Parallel processing complete: ${processId}`);\n      console.log(`  Execution time: ${executionTime}ms`);\n      console.log(`  Success rate: ${successCount}/${tasks.length} (${((successCount/tasks.length)*100).toFixed(1)}%)`);\n      console.log(`  Average task time: ${(executionTime/tasks.length).toFixed(2)}ms`);\n      \n      this.emit('completed', result);\n      \n      return result;\n      \n    } catch (error) {\n      const executionTime = Date.now() - startTime;\n      \n      const result: ParallelProcessResult = {\n        processId,\n        success: false,\n        error: error as Error,\n        executionTime,\n        tasksProcessed: 0,\n      };\n      \n      // Update active process status\n      const activeProcess = this.activeProcesses.get(processId);\n      if (activeProcess) {\n        activeProcess.status = 'failed';\n      }\n      \n      console.error(` Parallel processing failed: ${processId}`, error);\n      \n      this.emit('failed', { processId, error });\n      \n      return result;\n      \n    } finally {\n      // Remove from active processes after delay (keep for monitoring)\n      setTimeout(() => {\n        this.activeProcesses.delete(processId);\n      }, 60000); // 1 minute\n    }\n  }\n  \n  /**\n   * Execute a single task with timeout\n   */\n  private async executeTaskWithTimeout(\n    task: AgentTask,\n    timeoutMs: number\n  ): Promise<any> {\n    return Promise.race([\n      this.executeTask(task),\n      this.createTimeout(timeoutMs, task.id),\n    ]);\n  }\n  \n  /**\n   * Execute a single agent task\n   */\n  private async executeTask(task: AgentTask): Promise<any> {\n    const startTime = Date.now();\n    \n    try {\n      // Simulate task execution (replace with actual agent execution)\n      await new Promise(resolve => setTimeout(resolve, Math.random() * 500 + 50));\n      \n      const executionTime = Date.now() - startTime;\n      \n      return {\n        taskId: task.id,\n        agentId: task.agentId,\n        type: task.type,\n        result: `Task ${task.id} completed by agent ${task.agentId}`,\n        executionTime,\n        timestamp: new Date(),\n        success: true,\n      };\n    } catch (error) {\n      return {\n        taskId: task.id,\n        agentId: task.agentId,\n        type: task.type,\n        error: error instanceof Error ? error.message : 'Unknown error',\n        executionTime: Date.now() - startTime,\n        timestamp: new Date(),\n        success: false,\n      };\n    }\n  }\n  \n  /**\n   * Create timeout promise\n   */\n  private createTimeout(timeoutMs: number, taskId: string): Promise<never> {\n    return new Promise((_, reject) => {\n      setTimeout(() => {\n        reject(new Error(`Task ${taskId} timed out after ${timeoutMs}ms`));\n      }, timeoutMs);\n    });\n  }\n  \n  /**\n   * Split tasks into batches\n   */\n  private createBatches<T>(items: T[], batchSize: number): T[][] {\n    const batches: T[][] = [];\n    for (let i = 0; i < items.length; i += batchSize) {\n      batches.push(items.slice(i, i + batchSize));\n    }\n    return batches;\n  }\n  \n  /**\n   * Update metrics after process completion\n   */\n  private updateMetrics(\n    result: ParallelProcessResult,\n    successCount: number,\n    totalTasks: number\n  ): void {\n    this.metrics.totalProcessesExecuted++;\n    this.metrics.totalTasksProcessed += result.tasksProcessed;\n    this.metrics.totalParallelTime += result.executionTime;\n    \n    // Update averages\n    this.metrics.averageExecutionTime =\n      this.metrics.totalParallelTime / this.metrics.totalProcessesExecuted;\n    \n    this.metrics.averageTasksPerProcess =\n      this.metrics.totalTasksProcessed / this.metrics.totalProcessesExecuted;\n    \n    // Calculate average concurrency (tasks per ms)\n    if (this.metrics.totalParallelTime > 0) {\n      this.metrics.averageConcurrency =\n        (this.metrics.totalTasksProcessed * 1000) / this.metrics.totalParallelTime;\n    }\n    \n    // Update success rate (exponential moving average)\n    const currentSuccessRate = successCount / totalTasks;\n    this.metrics.successRate =\n      this.metrics.successRate === 0\n        ? currentSuccessRate\n        : this.metrics.successRate * 0.7 + currentSuccessRate * 0.3;\n  }\n  \n  /**\n   * Add result to history (with size limit)\n   */\n  private addToHistory(result: ParallelProcessResult): void {\n    this.processHistory.unshift(result);\n    \n    if (this.processHistory.length > this.maxHistorySize) {\n      this.processHistory.pop();\n    }\n  }\n  \n  /**\n   * Get active processes\n   */\n  getActiveProcesses(): ActiveProcess[] {\n    return Array.from(this.activeProcesses.values());\n  }\n  \n  /**\n   * Get process history\n   */\n  getProcessHistory(limit: number = 10): ParallelProcessResult[] {\n    return this.processHistory.slice(0, limit);\n  }\n  \n  /**\n   * Get process by ID\n   */\n  getProcess(processId: string): ActiveProcess | undefined {\n    return this.activeProcesses.get(processId);\n  }\n  \n  /**\n   * Get metrics\n   */\n  getMetrics(): ParallelProcessingMetrics {\n    return { ...this.metrics };\n  }\n  \n  /**\n   * Get status\n   */\n  getStatus() {\n    return {\n      initialized: this.isInitialized,\n      maxParallelTasks: this.maxParallelTasks,\n      activeProcesses: this.activeProcesses.size,\n      metrics: this.metrics,\n      recentHistory: this.processHistory.slice(0, 5).map(r => ({\n        processId: r.processId,\n        success: r.success,\n        tasksProcessed: r.tasksProcessed,\n        executionTime: r.executionTime,\n      })),\n    };\n  }\n  \n  /**\n   * Health check\n   */\n  healthCheck(): { status: string; details: any } {\n    if (!this.isInitialized) {\n      return {\n        status: 'not-ready',\n        details: { error: 'Parallel processing not initialized' },\n      };\n    }\n    \n    return {\n      status: 'healthy',\n      details: {\n        initialized: this.isInitialized,\n        maxParallelTasks: this.maxParallelTasks,\n        activeProcesses: this.activeProcesses.size,\n        totalProcessed: this.metrics.totalProcessesExecuted,\n        successRate: (this.metrics.successRate * 100).toFixed(2) + '%',\n        averageConcurrency: this.metrics.averageConcurrency.toFixed(2),\n      },\n    };\n  }\n  \n  /**\n   * Reset metrics (for testing)\n   */\n  resetMetrics(): void {\n    this.metrics = {\n      totalProcessesExecuted: 0,\n      totalTasksProcessed: 0,\n      averageExecutionTime: 0,\n      averageTasksPerProcess: 0,\n      totalParallelTime: 0,\n      averageConcurrency: 0,\n      successRate: 0,\n    };\n    this.processHistory = [];\n  }\n  \n  /**\n   * Set max parallel tasks\n   */\n  setMaxParallelTasks(max: number): void {\n    if (max < 1 || max > 100) {\n      throw new Error('Max parallel tasks must be between 1 and 100');\n    }\n    this.maxParallelTasks = max;\n    console.log(` Max parallel tasks updated: ${max}`);\n  }\n}\n\n// Singleton export\nexport const parallelProcessingWiringService = new ParallelProcessingWiringService();\n","/**\n * Error Recovery & Fallback Wiring Service\n * \n * Enables robust error handling and automatic recovery:\n * - Retry strategies with exponential backoff\n * - Circuit breaker pattern\n * - Fallback chain configuration\n * - Error categorization and logging\n * \n * Integration Points:\n * - Pre-orchestration: Configure retry policies\n * - During-orchestration: Handle errors with retries/fallbacks\n * - Post-orchestration: Analyze error patterns\n */\n\nexport interface RetryConfig {\n  maxRetries: number;\n  initialDelay: number; // milliseconds\n  maxDelay: number;\n  backoffMultiplier: number;\n  retryableErrors: string[];\n}\n\nexport interface CircuitBreakerState {\n  status: 'closed' | 'open' | 'half-open';\n  failureCount: number;\n  successCount: number;\n  lastFailureTime: Date | null;\n  nextRetryTime: Date | null;\n}\n\nexport interface ErrorRecoveryStats {\n  totalErrors: number;\n  recoveredErrors: number;\n  recoveryRate: number;\n  errorsByType: Record<string, number>;\n  fallbacksUsed: number;\n}\n\n/**\n * Error Recovery & Fallback Wiring Service\n */\nclass ErrorRecoveryWiringService {\n  private circuitBreakers: Map<string, CircuitBreakerState> = new Map();\n  private stats: ErrorRecoveryStats = {\n    totalErrors: 0,\n    recoveredErrors: 0,\n    recoveryRate: 0,\n    errorsByType: {},\n    fallbacksUsed: 0,\n  };\n\n  constructor() {\n    console.log(' Error Recovery & Fallback Wiring Service initialized');\n    console.log(' Features: Retry strategies, Circuit breaker, Fallback chains, Error analysis');\n  }\n\n  /**\n   * Execute with retry logic\n   */\n  async executeWithRetry<T>(\n    operation: () => Promise<T>,\n    operationId: string,\n    config: Partial<RetryConfig> = {}\n  ): Promise<{ success: boolean; result?: T; error?: Error; attempts: number }> {\n    const fullConfig: RetryConfig = {\n      maxRetries: 3,\n      initialDelay: 1000,\n      maxDelay: 30000,\n      backoffMultiplier: 2,\n      retryableErrors: ['TIMEOUT', 'RATE_LIMIT', 'SERVER_ERROR'],\n      ...config,\n    };\n\n    let attempts = 0;\n    let lastError: Error | null = null;\n\n    while (attempts <= fullConfig.maxRetries) {\n      try {\n        // Check circuit breaker\n        if (this.isCircuitOpen(operationId)) {\n          throw new Error('Circuit breaker is OPEN');\n        }\n\n        const result = await operation();\n        this.recordSuccess(operationId);\n        \n        if (attempts > 0) {\n          this.stats.recoveredErrors++;\n          this.updateRecoveryRate();\n          console.log(` [Recovery SUCCESS] ${operationId} recovered after ${attempts} retries`);\n        }\n\n        return { success: true, result, attempts };\n\n      } catch (error) {\n        attempts++;\n        lastError = error as Error;\n        this.stats.totalErrors++;\n        this.recordFailure(operationId);\n\n        const errorType = this.categorizeError(error as Error);\n        this.stats.errorsByType[errorType] = (this.stats.errorsByType[errorType] || 0) + 1;\n\n        // Check if error is retryable\n        if (!this.isRetryable(error as Error, fullConfig) || attempts > fullConfig.maxRetries) {\n          console.log(` [Recovery FAIL] ${operationId} failed after ${attempts} attempts: ${lastError.message}`);\n          this.updateRecoveryRate();\n          return { success: false, error: lastError, attempts };\n        }\n\n        // Calculate backoff delay\n        const delay = Math.min(\n          fullConfig.initialDelay * Math.pow(fullConfig.backoffMultiplier, attempts - 1),\n          fullConfig.maxDelay\n        );\n\n        console.log(` [Retry] ${operationId} attempt ${attempts}/${fullConfig.maxRetries} failed, retrying in ${delay}ms...`);\n        await this.sleep(delay);\n      }\n    }\n\n    this.updateRecoveryRate();\n    return { success: false, error: lastError!, attempts };\n  }\n\n  /**\n   * Execute with fallback chain\n   */\n  async executeWithFallback<T>(\n    operations: Array<{ id: string; fn: () => Promise<T> }>,\n    operationName: string\n  ): Promise<{ success: boolean; result?: T; usedFallback: boolean; fallbackLevel: number }> {\n    for (let i = 0; i < operations.length; i++) {\n      const { id, fn } = operations[i];\n      \n      try {\n        const result = await fn();\n        \n        if (i > 0) {\n          this.stats.fallbacksUsed++;\n          console.log(` [Fallback] ${operationName} succeeded using fallback level ${i}`);\n        }\n\n        return {\n          success: true,\n          result,\n          usedFallback: i > 0,\n          fallbackLevel: i,\n        };\n\n      } catch (error) {\n        console.log(` [Fallback] ${operationName} fallback ${i} failed: ${(error as Error).message}`);\n        \n        if (i === operations.length - 1) {\n          // All fallbacks exhausted\n          return {\n            success: false,\n            usedFallback: true,\n            fallbackLevel: i,\n          };\n        }\n      }\n    }\n\n    return { success: false, usedFallback: false, fallbackLevel: -1 };\n  }\n\n  /**\n   * Check if circuit breaker is open\n   */\n  private isCircuitOpen(operationId: string): boolean {\n    const breaker = this.circuitBreakers.get(operationId);\n    if (!breaker) return false;\n\n    if (breaker.status === 'open') {\n      if (breaker.nextRetryTime && Date.now() >= breaker.nextRetryTime.getTime()) {\n        // Transition to half-open\n        breaker.status = 'half-open';\n        console.log(` [Circuit Breaker] ${operationId} transitioned to HALF-OPEN`);\n        return false;\n      }\n      return true;\n    }\n\n    return false;\n  }\n\n  /**\n   * Record successful operation\n   */\n  private recordSuccess(operationId: string): void {\n    let breaker = this.circuitBreakers.get(operationId);\n    if (!breaker) {\n      breaker = {\n        status: 'closed',\n        failureCount: 0,\n        successCount: 0,\n        lastFailureTime: null,\n        nextRetryTime: null,\n      };\n      this.circuitBreakers.set(operationId, breaker);\n    }\n\n    breaker.successCount++;\n    breaker.failureCount = 0;\n\n    // Reset circuit if in half-open state\n    if (breaker.status === 'half-open') {\n      breaker.status = 'closed';\n      console.log(` [Circuit Breaker] ${operationId} CLOSED after successful recovery`);\n    }\n  }\n\n  /**\n   * Record failed operation\n   */\n  private recordFailure(operationId: string): void {\n    let breaker = this.circuitBreakers.get(operationId);\n    if (!breaker) {\n      breaker = {\n        status: 'closed',\n        failureCount: 0,\n        successCount: 0,\n        lastFailureTime: null,\n        nextRetryTime: null,\n      };\n      this.circuitBreakers.set(operationId, breaker);\n    }\n\n    breaker.failureCount++;\n    breaker.lastFailureTime = new Date();\n\n    // Open circuit if threshold exceeded\n    if (breaker.failureCount >= 5) {\n      breaker.status = 'open';\n      breaker.nextRetryTime = new Date(Date.now() + 60000); // 1 minute\n      console.log(` [Circuit Breaker] ${operationId} OPENED due to repeated failures`);\n    }\n  }\n\n  /**\n   * Categorize error type\n   */\n  private categorizeError(error: Error): string {\n    const message = error.message.toLowerCase();\n    \n    if (message.includes('timeout')) return 'TIMEOUT';\n    if (message.includes('rate limit')) return 'RATE_LIMIT';\n    if (message.includes('unauthorized') || message.includes('forbidden')) return 'AUTH_ERROR';\n    if (message.includes('not found')) return 'NOT_FOUND';\n    if (message.includes('server') || message.includes('500')) return 'SERVER_ERROR';\n    if (message.includes('network')) return 'NETWORK_ERROR';\n    \n    return 'UNKNOWN';\n  }\n\n  /**\n   * Check if error is retryable\n   */\n  private isRetryable(error: Error, config: RetryConfig): boolean {\n    const errorType = this.categorizeError(error);\n    return config.retryableErrors.includes(errorType);\n  }\n\n  /**\n   * Sleep utility\n   */\n  private sleep(ms: number): Promise<void> {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n\n  /**\n   * Update recovery rate\n   */\n  private updateRecoveryRate(): void {\n    this.stats.recoveryRate = this.stats.totalErrors > 0\n      ? this.stats.recoveredErrors / this.stats.totalErrors\n      : 0;\n  }\n\n  /**\n   * Get error recovery statistics\n   */\n  getRecoveryStats(): ErrorRecoveryStats {\n    return { ...this.stats };\n  }\n\n  /**\n   * Get health status\n   */\n  getHealthStatus() {\n    return {\n      status: this.stats.recoveryRate > 0.7 ? 'healthy' as const : 'degraded' as const,\n      recoveryRate: this.stats.recoveryRate,\n      totalErrors: this.stats.totalErrors,\n      recoveredErrors: this.stats.recoveredErrors,\n      features: {\n        retryStrategies: true,\n        circuitBreaker: true,\n        fallbackChains: true,\n        errorAnalysis: true,\n      },\n    };\n  }\n}\n\n// Export singleton instance\nexport const errorRecoveryWiringService = new ErrorRecoveryWiringService();\n"]}